<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Triathlon Pro</title>

<style>
:root {
  --bg:#000; --card:#1c1c1e; --input:#2c2c2e;
  --txt:#fff; --muted:#8e8e93; --accent:#ccff00;
}
*{box-sizing:border-box}
body{
  margin:0; padding:12px 12px 90px;
  background:var(--bg); color:var(--txt);
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
}
h1{margin:4px 0 10px;font-size:1.3rem}

.card{
  background:var(--card); border-radius:14px;
  padding:10px; margin-bottom:8px;
}
.row{display:grid; grid-template-columns:1fr 1fr; gap:8px}
label{font-size:.65rem;color:var(--muted)}
input[type=text],input[type=number]{
  background:var(--input);border:0;color:#fff;
  padding:6px;border-radius:8px;font-size:.9rem
}
input[type=range]{width:100%}
.time{font-family:monospace;font-size:.8rem;color:var(--muted)}

.btn{
  background:var(--input);
  color:var(--txt);
  border:0;
  border-radius:12px;
  padding:10px;
  font-size:.9rem;
  font-weight:600;
}

.total{
  position:fixed; left:12px; right:12px; bottom:12px;
  background:#111; border-radius:18px;
  padding:12px;
  display:flex; justify-content:space-between; align-items:center
}
.total b{color:var(--accent); font-size:1.4rem}
</style>
</head>

<body>

<h1>Triathlon Pro</h1>

<div class="row" style="margin-bottom:8px">
  <button id="halfBtn" class="btn">½ IM</button>
  <button id="fullBtn" class="btn">Full IM</button>
</div>

<!-- PLAVÁNÍ -->
<div class="card">
<div class="row">
<div>
<label>Plavání (m)</label>
<input id="swimDist" type="number" value="1900">
</div>
<div>
<label>Tempo /100 m</label>
<input id="swimPace" type="text" value="1:45">
<input id="swimSlider" type="range" min="60" max="180" step="1" value="105">
</div>
</div>
<div class="time" id="swimTime"></div>
</div>

<!-- T1 -->
<div class="card">
<label>Depo T1 (mm:ss)</label>
<input id="t1Text" type="text" value="03:00">
<input id="t1Slider" type="range" min="0" max="600" step="5" value="180">
<div class="time" id="t1Time"></div>
</div>

<!-- KOLO -->
<div class="card">
<div class="row">
<div>
<label>Kolo (km)</label>
<input id="bikeDist" type="number" value="90">
</div>
<div>
<label>Rychlost (km/h)</label>
<input id="bikeSpeed" type="number" value="32">
<input id="bikeSlider" type="range" min="20" max="50" step="0.5" value="32">
</div>
</div>
<div class="time">
  Kolo: <span id="bikeTime"></span><br>
  Do T2: <b id="toT2Time"></b>
</div>
</div>

<!-- T2 -->
<div class="card">
<label>Depo T2 (mm:ss)</label>
<input id="t2Text" type="text" value="02:30">
<input id="t2Slider" type="range" min="0" max="600" step="5" value="150">
<div class="time" id="t2Time"></div>
</div>

<!-- BĚH -->
<div class="card">
<div class="row">
<div>
<label>Běh (km)</label>
<input id="runDist" type="number" value="21.1">
</div>
<div>
<label>Tempo /km</label>
<input id="runPace" type="text" value="5:00">
<input id="runSlider" type="range" min="180" max="420" step="5" value="300">
</div>
</div>
<div class="time" id="runTime"></div>
</div>

<div class="total">
<div>Celkem</div>
<b id="total"></b>
</div>

<script>
const el=id=>document.getElementById(id);

/* pomocné */
function secToMMSS(s){
  return Math.floor(s/60)+":"+String(s%60).padStart(2,"0")
}
function paceToSec(v){
  const p=v.split(":");
  if(p.length<2) return 0;
  return (+p[0]||0)*60+(+p[1]||0)
}
function fmt(m){
  const h=Math.floor(m/60),
        mi=Math.floor(m%60),
        s=Math.floor(m*60%60);
  return `${h}:${String(mi).padStart(2,"0")}:${String(s).padStart(2,"0")}`
}

/* výpočet */
function calc(){
  const swim=(el("swimDist").value/100)*(el("swimSlider").value/60);
  const bike=(el("bikeDist").value/el("bikeSlider").value)*60;
  const run =el("runDist").value*(el("runSlider").value/60);
  const t1  =paceToSec(el("t1Text").value)/60;
  const t2  =paceToSec(el("t2Text").value)/60;

  const toT2 = swim + t1 + bike + t2;

  el("swimTime").textContent = fmt(swim);
  el("bikeTime").textContent = fmt(bike);
  el("runTime").textContent  = fmt(run);
  el("t1Time").textContent   = fmt(t1);
  el("t2Time").textContent   = fmt(t2);
  el("toT2Time").textContent = fmt(toT2);
  el("total").textContent    = fmt(toT2 + run);
}

/* synchronizace */
["swim","run"].forEach(d=>{
  el(d+"Slider").addEventListener("input",()=>{
    el(d+"Pace").value=secToMMSS(+el(d+"Slider").value);
    calc();
  });
  el(d+"Pace").addEventListener("input",()=>{
    el(d+"Slider").value=paceToSec(el(d+"Pace").value);
    calc();
  });
});

el("bikeSlider").addEventListener("input",()=>{
  el("bikeSpeed").value=el("bikeSlider").value; calc();
});
el("bikeSpeed").addEventListener("input",()=>{
  el("bikeSlider").value=el("bikeSpeed").value; calc();
});

["t1","t2"].forEach(t=>{
  el(t+"Slider").addEventListener("input",()=>{
    el(t+"Text").value=secToMMSS(+el(t+"Slider").value);
    calc();
  });
  el(t+"Text").addEventListener("input",()=>{
    el(t+"Slider").value=paceToSec(el(t+"Text").value);
    calc();
  });
});

/* přepínače */
el("halfBtn").onclick=()=>{
  el("swimDist").value=1900;
  el("bikeDist").value=90;
  el("runDist").value=21.1;
  calc();
}
el("fullBtn").onclick=()=>{
  el("swimDist").value=3800;
  el("bikeDist").value=180;
  el("runDist").value=42.2;
  calc();
}

calc();
</script>

</body>
</html>